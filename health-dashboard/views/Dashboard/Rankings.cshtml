@using System.Globalization;
@using X.PagedList.Mvc.Common;
@using X.PagedList.Mvc.Core;
@using X.PagedList.Mvc;
@using X.PagedList;

<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel tile">
            <div class="x_title">
                <h2>Rankings</h2>
                <div>@Model.Message</div>
                <br />
                <div class="clearfix"></div>
            </div>
            @if (Model.RenderTables)
            {
            <div class="x_content">
                @{string idName;}
                @foreach (ActivityType at in Model.ActivityTypes)
                {
                    var i = 0;
                    idName = "activity-type-" + @at.Id;
                    <table id=@idName class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>User</th>
                                <th>Total (Calories Burnt)</th>
                                <th>Activity Type</th>
                            </tr>
                        </thead>
                        @foreach (HealthActivity ha in Model.Activities)
                        {

                            if (at.Id.Equals(ha.activityTypeId))
                            {
                                <tbody>
                                    @{i++;}
                                    <tr>
                                        <td>#@i</td>
                                        <td>@ha.userId</td>
                                        <td>@ha.caloriesBurnt</td>
                                        <td>@ha.activityTypeId</td>
                                    </tr>
                                </tbody>
                            }
                        }
                    </table>
                }
                @Html.PagedListPager((IPagedList)Model.Activities, page => Url.Action("RemoveData", new { page }))
            </div>
            }
        </div>
    </div>
</div>

<script>
    function updateActivity() {
        document.getElementById("activityTypeDDL").value;

    }

    // 1. make a table for every activity type
    // 2. hide all of the tables that aren't the one selected 
</script>